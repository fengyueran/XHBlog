---
layout: post
title: Vultr VPS SSH密钥登录
category: OTHER
tagline: "Supporting tagline"
tags: [OTHER]
description:
date: 2019-5-25 18:10:20
---

### 生成秘钥

在 mac 或 linux 上直接通过 ssh-keygen 来生成。

- 在 terminal 中输入 ssh-keygen
- 确认秘钥位置
- 然后它会让你重复一个密码两次，如果不想在使用公钥的时候输入密码，可以留空
- 查看秘钥
  id_rsa 为私钥，id_rsa.pub 为公钥。
  ```
  $ ls ~/.ssh
  => id_rsa      id_rsa.pub  known_hosts
  ```

### 配置 Vultr

- 将公钥拷贝到 vps 的/root/.ssh 目录下， 并改名为 authorized_keys
  ```
  scp id_rsa.pub root@40.82.48.232:/root/.ssh
  ```
- 修改 sshd_config 配置文件 vi /etc/ssh/sshd_config
  ```
  RSAAuthentication yes #RSA认证
  PubkeyAuthentication yes #开启公钥验证
  AuthorizedKeysFile .ssh/authorized_keys #验证文件路径
  PasswordAuthentication no #禁止密码认证
  PermitEmptyPasswords no #禁止空密码
  ```
- 重启 SSH 服务，centos7, ubuntu 使用命令 systemctl restart sshd，centos6 使用命令/etc/init.d/sshd restart
